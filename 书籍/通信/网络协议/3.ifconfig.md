# 查看地址

- windows

```sh
ipconfig
```
- linux

```
ifconfig
```



net-tools 

iprorte2



```sh
ip addr
```

```sh
root@test:~# ip addr
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether fa:16:3e:c7:79:75 brd ff:ff:ff:ff:ff:ff
    inet 10.100.122.2/24 brd 10.100.122.255 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::f816:3eff:fec7:7975/64 scope link 
       valid_lft forever preferred_lft forever
```



# 地址分配



本来 32 位的 IP 地址就不够，还被分成了 5 类。现在想想，当时分配地址的时候，真是太奢侈了

![img](image/fa9a00346b8a83a84f4c00de948a5b5e.jpg)

![img](image/6de9d39a68520c8e3b75aa919fadb24c.jpg)



## 五类型域间选路(<u>CIDR</u>)

无类型域间选路，简称 **CIDR**。



将 32 位的 IP 地址一分为二，前面是网络号，后面是主机号。



<u>10.100.122.2/24</u>，这个 IP 地址中有一个斜杠，斜杠后面有个数字 24。这种地址表示形式，就是 **CIDR**。后面 24 的意思是，32 位中，前 24 位是网络号，后 8 位是主机号。





伴随着 **CIDR** 存在的，一个是广播地址，10.100.122.255。如果发送这个地址，所有 10.100.122 网络里面的机器都可以收到。另一个是子网掩码，255.255.255.0。





将子网掩码和 IP 地址进行 AND 计算。前面三个 255，转成二进制都是 1。1 和任何数值取 AND，都是原来数值，因而前三个数不变，为 10.100.122。后面一个 0，转换成二进制是 0，0 和任何数值取 AND，都是 0，因而最后一个数变为 0，合起来就是 10.100.122.0。<u>网络号。将子网掩码和 IP 地址按位计算 AND，就可得到网络号。</u>



### MAC 地址

在 IP 地址的上一行是 `link/ether fa:16:3e:c7:79:75 brd ff:ff:ff:ff:ff:ff`，这个被称为 MAC 地址，是一个网卡的物理地址，用十六进制，6 个 byte 表示。



一个网络包要从一个地方传到另一个地方，除了要有确定的地址，还需要有定位功能。



例如，你去杭州市网商路 599 号 B 楼 6 层找刘超，你在路上问路，可能被问的人不知道 B 楼是哪个，但是可以给你指网商路怎么去。但是如果你问一个人，你知道这个身份证号的人在哪里吗？可想而知，没有人知道。



<u>MAC 地址更像是身份证，是一个唯一的标识。</u>它的唯一性设计是为了组网的时候，不同的网卡放在一个网络里面的时候，可以不用担心冲突。从硬件角度，保证不同的网卡有不同的标识。





## 网络设备的状态标识



解析完了 MAC 地址，我们再来看 `<BROADCAST,MULTICAST,UP,LOWER_UP>` 是干什么的？这个叫做 net_device flags，网络设备的状态标识。



**UP** 表示网卡处于启动的状态；

**BROADCAST** 表示这个网卡有广播地址，可以发送广播包；

**MULTICAST** 表示网卡可以发送多播包；

**LOWER_UP** 表示 L1 是启动的，也即网线插着呢。

**MTU1500** 是指什么意思呢？是哪一层的概念呢？最大传输单元 MTU 为 1500，这是以太网的默认值。

