游戏:
1. 加入方式
2. 角色都是可选角色
3. 暂时离开
4. 我加入的房间列表
5. 玩家跳车
6. 没有角色的剧本可以开始游戏

创建集合

- game_log
- game_session
- game_player
- game_item

查询是否有正在游戏的房间

用户中心:
1. 管理员 > 验证码登录需要增加密码验证码一起登录
2. bind otp 时 需要输入密码
3. 使用 opt 修改密码

邮件:
1. 验证码邮件修改

交易中心:
1. 取消 三方账号信息 name 必填
2. 单元测试资金账号问题, 修复支付时, 流水记录有误问题   


社交中心
1. 会话消息分发优化, 保证多个服务实例时, 消息可达

redis序列化问题, 清除缓存

  - cmtyc:chat:session:message:last
  - cmtyc:follow:
  - CSC:CSA
  - uc:user:cache
  - mc:promotions:available



客户端开始游戏


1. 游戏会话开始游戏 > [事件] > 房间开始游戏 > [事件] > 消耗车次券 .... > [事件] >  车次券支付
2. 游戏会话结束 > [事件] > 游戏房间结束 > [事件] > 发起结算任务 .... > 分润
3. 游戏房间取消 > [事件] > 车次券出仓



增加命令

1. 批量执行物品命令
2. 物品删除
3. 物品转移

事件类型

GAME_SESSION_PLAYER_STATE_CHANGE
GAME_SESSION_GAME_SESSION_STATE_CHANGE
GAME_SESSION_ITEM_STATE_CHANGE
GAME_SESSION_COMMAND_LOG
GAME_SESSION_CURRENT_GAME_STATE


房间创建完成 gc.gr.pub.game_room_created_event
房间准备完成 gc.gr.pub.game_room_readied_event
房间已经开始游戏 gc.gr.pub.game_room_started_game
房间已经结束 gc.gr.pub.game_room_ended_game
房间已经取消 gc.gr.pub.game_room_canceled_event
房间更新 gc.gr.pub.game_room_updated_event
房间订单更新 gc.gr.pub.game_room_order_updated_event
玩家加入房间 gc.gr.pub.game_room_join_player
玩家退出房间 gc.gr.pub.game_room_quit_player
玩家活跃 gc.gr.pub.game_room_player_active_event
创建角色配置 gc.gst.pub.game_setting_role_setting_created_event
删除角色配置 gc.gst.pub.game_setting_role_setting_deleted_event
更新剧本配置 gc.gst.pub.game_setting_script_setting_changed_event
创建角色实例 gc.gst.pub.game_role_instance_created_event
修改角色实例 gc.gst.pub.game_role_instance_update_event
游戏状态变更 gc.gs.pub.game_session_state_change
物品状态变更 gc.gs.pub.item_state_change
命令日志 gc.gs.pub.command_log
当前游戏状态 gc.gs.pub.current_game_state

- game_room
- game_room_setting
- game_role_setting
- game_script_setting
- widget_note


发布

基础包升级
- 审批中心 ac 1
- 综合评析中心 cac 1
- 配置中心 cc 1
- 统计中心 sac 1

重点发布
- 客服中心: 基础包升级 csc 1
  - 修复 redis 反序列化问题
- 营销中心: mc 1
  - 基础包升级
  - 修复 redis 反序列化问题
  - 封测审核通过增加上架邮件
- 社区中心: cmtyc 1
  - 基础包升级
  - 分发队列支持多实例
  - 修复 redis 反序列化问题
- 通知中心: nc 1
  - 基础包升级
  - 修改邮件验证码模版
  - app消息 : TOKEN管理 与 身份绑定
  - 支持事件通过身份发送APP纤细
- 游戏中心: gc 1
  - 游戏房间
  - 游戏会话
  - 游戏历史
- 交易中心: tc 1
  - 对接游戏中心事件
    - 支持退款, 支持支付, 支持结算
  - 三方账号信息name必填>非必填
- 用户中心: uc 1
  - otp绑定优化
  - 管理员otp双重验证登录
  - otp重新绑定
  - 修复 redis 反序列化问题

其他处理

- 清除缓存 (配合redis 反序列化问题)
  - cmtyc:chat:session:message:last
  - cmtyc:follow:
  - CSC:CSA
  - uc:user:cache
  - mc:promotions:available

- 刷新头像地址
  
```JavaScript
db.t_subject.find().forEach(function(doc) {
  if (doc.icon && typeof doc.icon === "string") {
    var newFieldValue = doc.icon.replace("https://anzir-resource-test.s3.ap-southeast-2.amazonaws.com/", "");
    db.t_subject.updateOne(
      { _id: doc._id },
      { $set: { icon: newFieldValue } }
    );
  }
});
```


```

"accountName": "luke",
"password": "admin04728346"


"accountName": "yan",
"password": "admin75448988"


"accountName": "daniel",
"password": "admin67908231"


"accountName": "chao",
"password": "admin57144212"


"accountName": "carl",
"password": "admin64540535"


"accountName": "james",
"password": "admin00865589"


"accountName": "andrew",
"password": "admin31312532"


"accountName": "ash",
"password": "admin36417440"


"accountName": "vava",
"password": "admin02024159"


"accountName": "kaia",
"password": "admin68916317"


"accountName": "jeff",
"password": "admin35468974"


"accountName": "bob",
"password": "admin47236019"


"accountName": "vivid",
"password": "admin42852037"

```