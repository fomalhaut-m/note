# 剧本中心
1. 剧本
  1. 同步
    - 导入
    - 验证
      - 剧本数量
      - 剧本子集数量
      - 抽检. 比如某个字段对比, 字数
  2. 编辑/创建
    - 编辑, 创建
  3. 消息同步
  4. 角色数量统计
  5. 角色性别统计
  6. 操作历史
     1. 创建
     2. 各种提交. 各种撤回
  7. 复制


3. 版本管理
   1. 流程
      1. 创建Stable版本
      2. 处理 stable 关联的 chip 内容
      3. Stable修订检查
         1. 对比
   2. 标记对比版本
   3. 版本管理





# 1.9.0

- 通知中心 (已更新测试)
  - 邮件父模版: 电话号码和地址, 需要改图 (已更新)


社区中心 (已更新测试)
- 聊天
  - party - 群聊
  - 消息回复

- 帖子搜索
  - 已有

游戏中心 (已更新测试)
  - 申请进入房间
    - 申请通过后 > [事件] > 进入房间

  - 房间字段 (已更新测试)
    - 房间主题 (可以是剧本名称)
    - 区域 area
    - 玩家数量

交易中心 (已更新测试)
  - 分润, 分成直接进入冻结, 下一个月第二个星期一解冻
    - 资金账号增加功能
    - 先支付, 后冻结
    - 发起解冻任务
    - 最后解冻
  - 去除结算分润延时

用户中心
  - 二部验证
    - 验证开关
    - 普通用户注册 otp
      1. 使用密码验证
      2. 生成二维码
      3. 输入code 绑定
    - 增加登录方式
      1. 账号 / 密码 / otp code
 - 用户数据缓存去掉过期时间, 并优化逻辑 (记得初始化缓存)
  


修复
- 邮件关键字不一致问题








ddos

pre 预发布, 小范围试点!  部分用户->引入新服务, 一部分用户走老服务;

cqrs

分词


重试与重复验证:
1. *检查请求是否在有效期内*：先检查请求的时间戳或有效期字段，以确定请求是否在有效期内。
2. *进行重复校验*：如果请求在有效期内，再进行重复校验，防止无效请求占用资源。
详细步骤
1. *生成唯一请求ID*：客户端需要自行决定生成的场景,尤其是重试过程中,不能生成ID。
2. *检查请求有效期*：
    ◦ 每个请求应包含一个时间戳或有效期字段。
    ◦ 检查当前时间是否在请求的有效期内。
    ◦ 如果请求已过期，直接返回错误响应/已经处理过的结果，无需进行重复校验。
3. *进行重复校验*：
    ◦ 如果请求在有效期内，检查缓存或数据库中是否存在该请求ID。
    ◦ 如果存在，则判定为重复请求，返回相应的重复请求响应。
    ◦ 如果不存在，则继续处理请求，并将请求ID存储在缓存或数据库中(唯一索引插入失败、Redis SetNX)。
请求ID格式,初版:
客户端类型.微秒
注意: 如果涉及到分布式链路那么,格式中需要包含业务节点ID （已编辑） 



AP CP

